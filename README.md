# LedgerMind

**Your AI-Powered CFO for Small Businesses** â€” Making tax compliance simple and automatic.

[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Tests: 144 Passing](https://img.shields.io/badge/tests-144%20passing-brightgreen.svg)]()
[![Status: Phase 1](https://img.shields.io/badge/status-Phase%201%20Complete-success.svg)]()

---

## ğŸ¯ The Problem We Solve

**Indian MSMEs face a nightmare:**
- Messy Excel files everywhere (sales, purchases, bank statements)
- Confusing GST rules that change every year
- Fear of tax penalties and compliance issues
- No idea if vendors are reliable or cash flow is healthy
- Can't afford a full-time CFO or CA

**LedgerMind is your AI assistant that:**
- Reads your Excel files and understands them automatically
- Knows all GST rules (updated for 2025-26)
- Finds tax savings you're missing
- Warns you before compliance deadlines
- Answers your finance questions in plain language

**100% Private** â€” Everything runs on your computer. Your data never goes to the cloud.

**ğŸ” Customer Isolation** â€” Each company's data is stored separately and securely.

---

## ğŸ§  How It Works (Simple Explanation)

Think of LedgerMind as having **3 AI employees** working for you:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚   ğŸ“‚ YOUR EXCEL FILES                                                   â”‚
â”‚   (Sales, Purchases, Bank Statements)                                   â”‚
â”‚                         â”‚                                               â”‚
â”‚                         â–¼                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                    ğŸ¤– AI BRAIN (LedgerMind)                     â”‚   â”‚
â”‚   â”‚                                                                 â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚   â”‚
â”‚   â”‚   â”‚ DISCOVERY â”‚   â”‚ AUDITOR   â”‚   â”‚ ADVISOR   â”‚               â”‚   â”‚
â”‚   â”‚   â”‚   Agent   â”‚   â”‚   Agent   â”‚   â”‚   Agent   â”‚               â”‚   â”‚
â”‚   â”‚   â”‚           â”‚   â”‚           â”‚   â”‚           â”‚               â”‚   â”‚
â”‚   â”‚   â”‚ "I read   â”‚   â”‚ "I check  â”‚   â”‚ "I find   â”‚               â”‚   â”‚
â”‚   â”‚   â”‚  your     â”‚   â”‚  for tax  â”‚   â”‚  savings  â”‚               â”‚   â”‚
â”‚   â”‚   â”‚  files"   â”‚   â”‚  mistakes"â”‚   â”‚  & risks" â”‚               â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚   â”‚
â”‚   â”‚         â”‚               â”‚               â”‚                       â”‚   â”‚
â”‚   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   â”‚
â”‚   â”‚                         â–¼                                       â”‚   â”‚
â”‚   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚   â”‚
â”‚   â”‚              â”‚   ğŸ“š KNOWLEDGE      â”‚                           â”‚   â”‚
â”‚   â”‚              â”‚   GST Rules 2025    â”‚                           â”‚   â”‚
â”‚   â”‚              â”‚   Tax Rates         â”‚                           â”‚   â”‚
â”‚   â”‚              â”‚   Compliance Laws   â”‚                           â”‚   â”‚
â”‚   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                               â”‚
â”‚                         â–¼                                               â”‚
â”‚   ğŸ“Š INSIGHTS FOR YOU                                                   â”‚
â”‚   â€¢ "You overpaid â‚¹12,400 in GST last month"                           â”‚
â”‚   â€¢ "Warning: Payment to ABC Traders is overdue"                        â”‚
â”‚   â€¢ "Your best vendor is XYZ Supplies (98% reliable)"                  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### The 3 AI Agents Explained

| Agent | What It Does | Real-World Analogy |
|-------|--------------|-------------------|
| ğŸ” **Discovery Agent** | Reads your messy Excel files and organizes them | Like a junior accountant who sorts through your paperwork |
| âœ… **Compliance Agent** | Checks if you're following GST rules correctly | Like a tax auditor checking your books |
| ğŸ“ˆ **Strategist Agent** | Finds savings and warns about problems | Like a CFO giving you business advice |

---

## ğŸ’¡ What Can You Ask LedgerMind?

### About Your Data
- *"What were my total sales last month?"*
- *"Show me all purchases above â‚¹50,000"*
- *"Which vendor do I owe the most?"*

### About GST Rules
- *"When should I file GSTR-3B?"*
- *"What is Section 43B(h)?"*
- *"Can I claim ITC on office furniture?"*
- *"What is the GST rate on laptops?"*

### Compliance Checks
- *"Run a compliance check"*
- *"Are there any tax issues?"*
- *"Check my vendor payments"*

---

## ğŸ“ Project Structure

```
ledgermind/
â”‚
â”œâ”€â”€ ğŸ¤– agents/                     # The 3 AI workers
â”‚   â”œâ”€â”€ discovery.py               # Reads and organizes your files
â”‚   â”œâ”€â”€ compliance.py              # Checks tax rules
â”‚   â””â”€â”€ strategist.py              # Gives business advice
â”‚
â”œâ”€â”€ âš™ï¸ core/                        # The engine room
â”‚   â”œâ”€â”€ customer.py                # ğŸ” Customer isolation & multi-tenancy
â”‚   â”œâ”€â”€ data_engine.py             # Turns Excel into searchable database
â”‚   â”œâ”€â”€ knowledge.py               # Stores GST rules for quick lookup
â”‚   â”œâ”€â”€ reference_data.py          # Loads tax rates from CSV files
â”‚   â”œâ”€â”€ query_classifier.py        # Routes questions to right source
â”‚   â”œâ”€â”€ guardrails.py              # Safety checks (validates GSTINs, etc.)
â”‚   â”œâ”€â”€ metrics.py                 # Tracks system performance
â”‚   â”œâ”€â”€ schema.py                  # Standard format for all data
â”‚   â””â”€â”€ mapper.py                  # Maps messy headers to standard names
â”‚
â”œâ”€â”€ ğŸ¯ orchestration/              # The traffic controller
â”‚   â”œâ”€â”€ router.py                  # Understands what you're asking
â”‚   â””â”€â”€ workflow.py                # Coordinates the agents
â”‚
â”œâ”€â”€ ğŸ§  llm/                        # AI brain connection
â”‚   â””â”€â”€ client.py                  # Talks to the Ollama AI model
â”‚
â”œâ”€â”€ ğŸ“Š db/                         # Reference data (pre-loaded)
â”‚   â”œâ”€â”€ README.md                  # Documentation for data files
â”‚   â”œâ”€â”€ gst/                       # GST-related data
â”‚   â”‚   â”œâ”€â”€ slabs.csv              # Rate slabs (0%, 5%, 18%, 28%)
â”‚   â”‚   â”œâ”€â”€ goods_hsn.csv          # GST on 89 products (HSN codes)
â”‚   â”‚   â”œâ”€â”€ services_sac.csv       # GST on 50 services (SAC codes)
â”‚   â”‚   â””â”€â”€ blocked_itc.csv        # Section 17(5) blocked credits
â”‚   â”œâ”€â”€ msme/                      # MSME classification
â”‚   â”‚   â””â”€â”€ classification.csv     # Micro/Small/Medium limits
â”‚   â””â”€â”€ india/                     # India reference data
â”‚       â””â”€â”€ state_codes.csv        # All 38 GST state codes
â”‚
â”œâ”€â”€ ğŸ“š knowledge/                  # Legal documents (PDFs)
â”‚   â”œâ”€â”€ gst/                       # CGST Act, Rules
â”‚   â””â”€â”€ accounting/                # Accounting standards
â”‚
â”œâ”€â”€ ğŸ“‚ workspace/                  # YOUR company data goes here
â”‚   â”œâ”€â”€ {company_id}/              # Each company has its own folder
â”‚   â”‚   â”œâ”€â”€ data/                  # Excel/CSV files
â”‚   â”‚   â”œâ”€â”€ {company_id}.duckdb    # Company's database (isolated)
â”‚   â”‚   â””â”€â”€ profile.json           # Company metadata
â”‚   â””â”€â”€ sample_company/            # Example files to try
â”‚
â”œâ”€â”€ ğŸ§ª tests/                      # Test suite (144 tests)
â”‚   â”œâ”€â”€ conftest.py                # Shared test fixtures
â”‚   â”œâ”€â”€ test_config.py             # Configuration tests
â”‚   â”œâ”€â”€ test_reference_data.py     # Data loading tests
â”‚   â”œâ”€â”€ test_guardrails.py         # Validation tests
â”‚   â”œâ”€â”€ test_query_classifier.py   # Query routing tests
â”‚   â”œâ”€â”€ test_customer.py           # ğŸ” Customer isolation tests
â”‚   â”œâ”€â”€ test_agents.py             # Agent tests
â”‚   â”œâ”€â”€ test_orchestration.py      # Workflow tests
â”‚   â””â”€â”€ test_integration.py        # End-to-end tests
â”‚
â”œâ”€â”€ ğŸ“– docs/                       # Detailed documentation
â”‚   â”œâ”€â”€ ARCHITECTURE.md            # Technical deep-dive
â”‚   â””â”€â”€ ROADMAP.md                 # Development plan
â”‚
â”œâ”€â”€ ğŸ”§ scripts/                    # Helper tools
â”‚   â”œâ”€â”€ create_sample_data.py      # Generate test data
â”‚   â””â”€â”€ ingest_knowledge.py        # Load PDFs into knowledge base
â”‚
â”œâ”€â”€ main.py                        # ğŸš€ Start here!
â”œâ”€â”€ config.py                      # Settings (paths, model config)
â””â”€â”€ requirements.txt               # Required packages
```

---

## ğŸ›¡ï¸ Safety Features (Guardrails)

LedgerMind is designed to be **safe and reliable**:

| Feature | What It Does |
|---------|--------------|
| **GSTIN Validation** | Checks if tax IDs are real and correctly formatted |
| **Math Safety** | AI never does calculations â€” only the computer does (no mistakes!) |
| **Data Locality** | Your files never leave your computer |
| **Source Citations** | Always shows which rule or document an answer comes from |
| **Section 43B(h)** | Validates 45-day MSME payment compliance |
| **ITC Time Limits** | Checks if Input Tax Credit is still claimable |

---

## ğŸ“ˆ Current Status

### âœ… Phase 1 Complete!

| Feature | Status | What You Can Do |
|---------|--------|-----------------|
| **Read Excel/CSV** | âœ… Ready | Drop your files, we understand them |
| **GST Q&A** | âœ… Ready | Ask about CGST, SGST, ITC, slabs, returns |
| **Tax Rate Lookup** | âœ… Ready | 89 goods + 50 services |
| **Compliance Check** | âœ… Ready | Find tax issues |
| **GSTIN Validation** | âœ… Ready | Verify tax IDs |
| **Knowledge Base** | âœ… Ready | 1,276 GST rule chunks |
| **Query Classifier** | âœ… Ready | Routes questions to correct source |
| **Test Suite** | âœ… Ready | 144 tests passing |
| **Customer Isolation** | âœ… Ready | Each company's data separated |

### Coming Soon ğŸš§

| Feature | Phase | Description |
|---------|-------|-------------|
| **ITC Reconciliation** | Phase 2 | Match your purchases with GSTR-2B |
| **43B(h) Alerts** | Phase 2 | Warn before MSME payment deadlines |
| **Vendor Scoring** | Phase 3 | Rate vendors by reliability |
| **Cash Flow Forecast** | Phase 3 | Predict next 3 months |
| **Web Interface** | Phase 4 | Beautiful dashboard |
| **PDF Reports** | Phase 4 | Export audit reports |

---

## ğŸš€ Quick Start

### Step 1: Install (One Time)

```bash
cd ledgermind
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### Step 2: Start AI Brain

```bash
# Install Ollama (if not installed)
curl -fsSL https://ollama.com/install.sh | sh

# Download the AI model (4GB, one time)
ollama pull qwen2.5:7b-instruct

# Start Ollama server
ollama serve
```

### Step 3: Run LedgerMind

```bash
python main.py
```

### Step 4: Try It!

```
You> analyze folder workspace/sample_company/
You> run compliance check
You> When should I file GSTR-3B?
You> What is the GST rate on laptops?
You> What is CGST?
```

### Step 5: Run Tests

```bash
# Run all 121 tests
pytest tests/ -v

# Run specific test file
pytest tests/test_guardrails.py -v
```

---

## ğŸ“… Development Roadmap

```
       DONE âœ…                  NOW                   FUTURE
         â”‚                      â”‚                       â”‚
         â–¼                      â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PHASE 1       â”‚   â”‚   PHASE 2       â”‚   â”‚   PHASE 3 & 4   â”‚
â”‚   FOUNDATION    â”‚   â”‚   COMPLIANCE    â”‚   â”‚   INTELLIGENCE  â”‚
â”‚   âœ… COMPLETE   â”‚   â”‚   â—€â”€â”€ NEXT      â”‚   â”‚                 â”‚
â”‚                 â”‚   â”‚                 â”‚   â”‚                 â”‚
â”‚ âœ… Read files   â”‚   â”‚ â€¢ Tax rate      â”‚   â”‚ â€¢ Vendor scores â”‚
â”‚ âœ… GST Q&A      â”‚   â”‚   verification  â”‚   â”‚ â€¢ Cash forecast â”‚
â”‚ âœ… Tax rates    â”‚   â”‚ â€¢ 43B(h) alerts â”‚   â”‚ â€¢ Web dashboard â”‚
â”‚ âœ… Knowledge    â”‚   â”‚ â€¢ ITC matching  â”‚   â”‚ â€¢ PDF exports   â”‚
â”‚ âœ… Guardrails   â”‚   â”‚ â€¢ HSN verify    â”‚   â”‚ â€¢ REST API      â”‚
â”‚ âœ… Tests (121)  â”‚   â”‚ â€¢ Audit reports â”‚   â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š GST 2025-26 Knowledge

LedgerMind knows about:

| Category | Coverage |
|----------|----------|
| **GST Slabs** | 0%, 5%, 12%, 18%, 28% + Cess |
| **HSN Codes** | 89 common goods with rates |
| **SAC Codes** | 50 common services with rates |
| **Section 43B(h)** | MSME payment rules (45 days) |
| **Section 17(5)** | 15 blocked ITC items |
| **MSME Classification** | Micro/Small/Medium limits |
| **State Codes** | All 38 GST state codes |

---

## â“ FAQ

**Q: Is my data safe?**
> Yes! Everything runs on your computer. No data goes to any server.

**Q: Do I need internet?**
> Only to download the AI model once. After that, works offline.

**Q: How accurate is it?**
> Tax rules come from official CGST Act/Rules. AI provides explanations but always verify with your CA for critical decisions.

**Q: What Excel formats work?**
> .xlsx, .xls, and .csv files. Any format your accountant uses.

**Q: Can I use it for multiple companies?**
> Yes! LedgerMind automatically creates separate workspaces for each company. Just run `python main.py` and select "new" to create a new company. Each company has its own database and data folder.

---

## ğŸ¤ Contributing

This project is under active development. Ideas and contributions welcome!

---

## ğŸ“„ License

MIT License â€” Free to use for personal and commercial purposes.

---

**Built with â¤ï¸ for Indian MSMEs**

*Making tax compliance less painful, one Excel file at a time.*
